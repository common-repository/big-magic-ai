(()=>{"use strict";var e,t={565:()=>{const e=window.wp.blocks,t=window.React,a=(window.wp.i18n,window.wp.blockEditor),r=window.wp.components,n=window.wp.element,o=JSON.parse('{"u2":"big-magic-ai/correct-english-grammar"}');(0,e.registerBlockType)(o.u2,{attributes:{content:{type:"string",source:"html",selector:"p"}},edit:({attributes:e,isSelected:o,className:i,setAttributes:s})=>{const[c,l]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),[g,d]=(0,n.useState)(""),[w,b]=(0,n.useState)(""),[v,y]=(0,n.useState)(""),[f,k]=(0,n.useState)(!0),C=!p&&e.content;let E=(0,t.createElement)(r.Button,{variant:"primary",isBusy:m,type:"submit",onClick:()=>{(async()=>{u(!0);const e=await fetch(`${wpApiSettings.root}openai/v1/key`,{credentials:"include",headers:{"content-type":"application/json","X-WP-Nonce":wpApiSettings.nonce}}),t=await e.json(),a={model:"gpt-3.5-turbo",messages:[{role:"user",content:`Leave the prompt as it is and only correct its grammar of the following if it's wrong. Give a reason as well in a separate list after the correction: ${v}`}],temperature:.7,max_tokens:500,top_p:1};await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{u(!1),e&&(l(!0),d(e.choices[0].message.content))})).catch((e=>{console.error(e)}))})()},style:{opacity:f?.5:1}},m?"Asking ChatGPT...":"Ask ChatGPT");return f&&(E=(0,t.createElement)(r.Disabled,null,E)),(0,n.useEffect)((()=>{v.length>0?k(!1):k(!0)}),[v.length]),(0,t.createElement)("div",{...(0,a.useBlockProps)()},!C&&(0,t.createElement)(r.Placeholder,{label:"[Big Magic AI] Correct English Grammar",instructions:"Add a paragraph to check its grammar"},(0,t.createElement)(r.BaseControl,null,(0,t.createElement)(r.TextareaControl,{value:v,onChange:e=>y(e),rows:"8",style:{width:"700px"}}),E,(0,t.createElement)("p",{className:"error"},w&&!m&&w))),(g||C)&&(0,t.createElement)(a.RichText,{label:"Corrected paragraph by ChatGPT",help:"Edit the response",value:g||C,onChange:e=>C?void s({content:e}):d(e)}),c&&!p&&(0,t.createElement)(r.Button,{variant:"primary",type:"submit",onClick:()=>{h(!0),s({content:g})}},"Use This Updated Content By ChatGPT"))},save:({attributes:e})=>{const r=a.useBlockProps.save();return(0,t.createElement)(a.RichText.Content,{...r,tagName:"p",value:e.content})}}),(0,e.registerBlockStyle)("big-magic-ai/correct-english-grammar",{name:"big-magic-ai",label:"Fancy Quote"})}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,a,n,o)=>{if(!a){var i=1/0;for(p=0;p<e.length;p++){for(var[a,n,o]=e[p],s=!0,c=0;c<a.length;c++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](a[c])))?a.splice(c--,1):(s=!1,o<i&&(i=o));if(s){e.splice(p--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[a,n,o]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={419:0,207:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[i,s,c]=a,l=0;if(i.some((t=>0!==e[t]))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(c)var p=c(r)}for(t&&t(a);l<i.length;l++)o=i[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(p)},a=globalThis.webpackChunkbig_magic_ai=globalThis.webpackChunkbig_magic_ai||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=r.O(void 0,[207],(()=>r(565)));n=r.O(n)})();