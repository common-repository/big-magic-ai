(()=>{"use strict";var e,t={720:()=>{const e=window.wp.blocks,t=window.React,n=(window.wp.i18n,window.wp.blockEditor),a=window.wp.components,o=window.wp.element,r=window.wp.primitives,l=(0,t.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(r.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,t.createElement)(r.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})),s=[{name:"Short",maxLength:50},{name:"Medium",maxLength:300},{name:"Long",maxLength:700}],i=JSON.parse('{"u2":"big-magic-ai/generate-content"}');(0,e.registerBlockType)(i.u2,{attributes:{content:{type:"string",source:"html",selector:"p"}},edit:({attributes:e,isSelected:r,className:i,setAttributes:c})=>{const[h,m]=(0,o.useState)(!1),[p,u]=(0,o.useState)(!1),[g,d]=(0,o.useState)(!1),[b,w]=(0,o.useState)(""),[v,f]=(0,o.useState)(""),[E,y]=(0,o.useState)(""),[C,x]=(0,o.useState)(""),[k,S]=(0,o.useState)(!0),T=!p&&e.content,B=s.map((e=>({title:e.name,onClick:()=>x(e)}))),O=()=>{(async()=>{d(!0);const e=await fetch(`${wpApiSettings.root}openai/v1/key`,{credentials:"include",headers:{"content-type":"application/json","X-WP-Nonce":wpApiSettings.nonce}}),t=await e.json(),n={model:"gpt-3.5-turbo",messages:[{role:"user",content:v}],temperature:.7,max_tokens:C.maxLength,top_p:1};await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{d(!1),e&&(m(!0),w(e.choices[0].message.content))})).catch((e=>{console.error(e)}))})()};let P=(0,t.createElement)(a.Button,{variant:"primary",isBusy:g,type:"submit",style:{opacity:k?.5:1},onClick:()=>C?O():y("Please select the desired size of the length of the response")},g?"Generating...":"Generate");return k&&(P=(0,t.createElement)(a.Disabled,null,P)),(0,o.useEffect)((()=>{v.length>0?S(!1):S(!0)}),[v.length]),(0,o.useEffect)((()=>{C&&y("")}),[C]),(0,t.createElement)("div",{...(0,n.useBlockProps)()},!T&&(0,t.createElement)(a.Placeholder,{label:"[Big Magic AI] Generate Content",instructions:"Create content based on the given prompt. You must choose a size of the length of the response. Remember, the shorter the length, the faster the response will be."},(0,t.createElement)(a.Flex,{justify:"flex-start"},(0,t.createElement)(a.FlexItem,null,(0,t.createElement)(a.__experimentalText,{align:"center",adjustLineHeightForInnerControls:!0},C?`Content Length: ${C.name}`:"Please select a size of the length of the response.")),(0,t.createElement)(a.FlexItem,null,(0,t.createElement)(a.DropdownMenu,{icon:l,label:"Select a size",controls:B}))),(0,t.createElement)(n.BlockControls,null,(0,t.createElement)(a.ToolbarGroup,null,(0,t.createElement)(a.ToolbarButton,{showTooltip:!0,onClick:O,icon:"update-alt",label:"Generate again"}))),(0,t.createElement)(a.BaseControl,null,(0,t.createElement)(a.TextControl,{label:"Add a prompt to generate content",value:v,onChange:e=>f(e)}),P,(0,t.createElement)("p",{className:"error"},E&&!g&&E))),(b||T)&&(0,t.createElement)(n.RichText,{label:"Content generated by ChatGPT",help:"Edit the response",value:b||T,onChange:e=>T?void c({content:e}):w(e)}),h&&!p&&(0,t.createElement)(a.Button,{variant:"primary",type:"submit",onClick:()=>{u(!0),c({content:b})}},"Use This Content Generated By ChatGPT"))},save:({attributes:e})=>{const a=n.useBlockProps.save();return(0,t.createElement)(n.RichText.Content,{...a,tagName:"p",value:e.content})}}),(0,e.registerBlockStyle)("big-magic-ai/generate-content",{name:"big-magic-ai",label:"Fancy Quote"})}},n={};function a(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=(t,n,o,r)=>{if(!n){var l=1/0;for(h=0;h<e.length;h++){for(var[n,o,r]=e[h],s=!0,i=0;i<n.length;i++)(!1&r||l>=r)&&Object.keys(a.O).every((e=>a.O[e](n[i])))?n.splice(i--,1):(s=!1,r<l&&(l=r));if(s){e.splice(h--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[n,o,r]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={687:0,701:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[l,s,i]=n,c=0;if(l.some((t=>0!==e[t]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(i)var h=i(a)}for(t&&t(n);c<l.length;c++)r=l[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(h)},n=globalThis.webpackChunkbig_magic_ai=globalThis.webpackChunkbig_magic_ai||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=a.O(void 0,[701],(()=>a(720)));o=a.O(o)})();