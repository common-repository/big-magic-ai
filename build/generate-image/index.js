(()=>{"use strict";var e,t={833:()=>{const e=window.wp.blocks,t=window.React,a=(window.wp.i18n,window.wp.blockEditor),n=window.wp.components,r=window.wp.element,l=window.wp.primitives,i=(0,t.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(l.Path,{d:"M12 9.2c-2.2 0-3.9 1.8-3.9 4s1.8 4 3.9 4 4-1.8 4-4-1.8-4-4-4zm0 6.5c-1.4 0-2.4-1.1-2.4-2.5s1.1-2.5 2.4-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zM20.2 8c-.1 0-.3 0-.5-.1l-2.5-.8c-.4-.1-.8-.4-1.1-.8l-1-1.5c-.4-.5-1-.9-1.7-.9h-2.9c-.6.1-1.2.4-1.6 1l-1 1.5c-.3.3-.6.6-1.1.7l-2.5.8c-.2.1-.4.1-.6.1-1 .2-1.7.9-1.7 1.9v8.3c0 1 .9 1.9 2 1.9h16c1.1 0 2-.8 2-1.9V9.9c0-1-.7-1.7-1.8-1.9zm.3 10.1c0 .2-.2.4-.5.4H4c-.3 0-.5-.2-.5-.4V9.9c0-.1.2-.3.5-.4.2 0 .5-.1.8-.2l2.5-.8c.7-.2 1.4-.6 1.8-1.3l1-1.5c.1-.1.2-.2.4-.2h2.9c.2 0 .3.1.4.2l1 1.5c.4.7 1.1 1.1 1.9 1.4l2.5.8c.3.1.6.1.8.2.3 0 .4.2.4.4v8.1z"})),c=(0,t.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(l.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,t.createElement)(l.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})),o=[{name:"Small",dimension:"256x256"},{name:"Medium",dimension:"512x512"},{name:"Big",dimension:"1024x1024"}],s=JSON.parse('{"u2":"big-magic-ai/generate-image"}');(0,e.registerBlockType)(s.u2,{attributes:{src:{type:"string",selector:"img",attribute:"src",source:"attribute"}},edit:({attributes:e,isSelected:l,className:s,setAttributes:m})=>{const[u,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[d,w]=(0,r.useState)(!1),[b,v]=(0,r.useState)(""),[E,y]=(0,r.useState)(""),[f,k]=(0,r.useState)(""),[x,S]=(0,r.useState)(""),[B,C]=(0,r.useState)(!0),O=!g&&e.src,z=o.map((e=>({title:e.name,onClick:()=>y(e)}))),T=()=>{(async()=>{w(!0);const e=await fetch(`${wpApiSettings.root}openai/v1/key`,{credentials:"include",headers:{"content-type":"application/json","X-WP-Nonce":wpApiSettings.nonce}}),t=await e.json(),a={model:"dall-e-3",prompt:x,n:1,size:E.dimension};await fetch("https://api.openai.com/v1/images/generations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{e&&(w(!1),p(!0),v(e.data[0].url))})).catch((e=>{console.error(e)}))})()};let P=(0,t.createElement)(n.Button,{variant:"primary",isBusy:d,type:"submit",onClick:()=>E?T():k("Please select the desired size for the image"),style:{opacity:B?.5:1}},d?"Generating...":"Generate");return B&&(P=(0,t.createElement)(n.Disabled,null,P)),(0,r.useEffect)((()=>{x.length>0?C(!1):C(!0)}),[x.length]),(0,r.useEffect)((()=>{E&&k("")}),[E]),(0,t.createElement)("div",{...(0,a.useBlockProps)()},!e.src&&(0,t.createElement)(n.Placeholder,{label:"[Big Magic AI] Generate Image",instructions:"Creates an image given a prompt.",icon:(0,t.createElement)(a.BlockIcon,{icon:i})},(0,t.createElement)(n.Flex,{justify:"flex-start"},(0,t.createElement)(n.FlexItem,null,(0,t.createElement)(n.__experimentalText,{align:"center",adjustLineHeightForInnerControls:!0},E?`Size: ${E.name}`:"Please select a size")),(0,t.createElement)(n.FlexItem,null,(0,t.createElement)(n.DropdownMenu,{icon:c,label:"Select a size",controls:z}))),(0,t.createElement)(a.BlockControls,null,(0,t.createElement)(n.ToolbarGroup,null,(0,t.createElement)(n.ToolbarButton,{showTooltip:!0,onClick:T,icon:"update-alt",label:"Try another image"}))),(0,t.createElement)(n.BaseControl,null,(0,t.createElement)(n.TextControl,{label:"Add a prompt to create an image",value:x,onChange:e=>S(e)}),P,(0,t.createElement)("p",{className:"error"},f&&!d&&f))),(0,t.createElement)(n.Flex,{direction:"column"},(b||O)&&(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)("img",{src:b||e.src,alt:x})),(0,t.createElement)(n.FlexBlock,null,u&&!g&&(0,t.createElement)(n.Button,{variant:"primary",type:"submit",onClick:()=>{h(!0),m({src:b})}},"Use This Image"))))},save:({attributes:e})=>{const n=a.useBlockProps.save();return(0,t.createElement)("div",{className:"gutenberghub-random-image-block"},(0,t.createElement)("img",{...n,src:e.src}))}}),(0,e.registerBlockStyle)("big-magic-ai/generate-image",{name:"big-magic-ai",label:"Fancy Quote"})}},a={};function n(e){var r=a[e];if(void 0!==r)return r.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,a,r,l)=>{if(!a){var i=1/0;for(m=0;m<e.length;m++){for(var[a,r,l]=e[m],c=!0,o=0;o<a.length;o++)(!1&l||i>=l)&&Object.keys(n.O).every((e=>n.O[e](a[o])))?a.splice(o--,1):(c=!1,l<i&&(i=l));if(c){e.splice(m--,1);var s=r();void 0!==s&&(t=s)}}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[a,r,l]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={928:0,201:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var r,l,[i,c,o]=a,s=0;if(i.some((t=>0!==e[t]))){for(r in c)n.o(c,r)&&(n.m[r]=c[r]);if(o)var m=o(n)}for(t&&t(a);s<i.length;s++)l=i[s],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(m)},a=globalThis.webpackChunkbig_magic_ai=globalThis.webpackChunkbig_magic_ai||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=n.O(void 0,[201],(()=>n(833)));r=n.O(r)})();